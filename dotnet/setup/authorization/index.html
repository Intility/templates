<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">AAD Authorization | Create Intility App</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://create.intility.app//dotnet/setup/authorization"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-dotnet-current"><meta data-react-helmet="true" property="og:title" content="AAD Authorization | Create Intility App"><meta data-react-helmet="true" name="description" content="The example code is set up to use authorization. For this to work, an App Registration has to be set up in Azure AD."><meta data-react-helmet="true" property="og:description" content="The example code is set up to use authorization. For this to work, an App Registration has to be set up in Azure AD."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://create.intility.app//dotnet/setup/authorization"><link data-react-helmet="true" rel="alternate" href="https://create.intility.app//dotnet/setup/authorization" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://create.intility.app//dotnet/setup/authorization" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.50d49107.css">
<link rel="preload" href="/assets/js/runtime~main.097a4fd9.js" as="script">
<link rel="preload" href="/assets/js/main.b9715fda.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo192.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo192.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Create Intility App</b></a><a class="navbar__item navbar__link" href="/cra">React</a><a class="navbar__item navbar__link" href="/dotnet">.NET API</a><a class="navbar__item navbar__link" href="/fastapi">FastAPI</a><a class="navbar__item navbar__link" href="/express">Express</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Intility/templates" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dotnet/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dotnet/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/dotnet/features">Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active menuLinkText_QVir" aria-current="page">Set up</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/setup/gitlab">GitLab Repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/dotnet/setup/authorization">AAD Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/setup/gitlab-ci">.gitlab-ci.yml Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/setup/sonarqube">SonarQube</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/setup/sentry">Sentry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/setup/deploy">Deploy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Topics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/topics/configuration">Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/topics/logging">Logging</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Advanced</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/advanced/adding-environments">Adding Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/advanced/deploy-argocd">Deploy with ArgoCD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/dotnet/advanced/azure-app-config">Azure App Config</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AAD Authorization</h1></header><p>The example code is set up to use authorization. For this to work, an App Registration has to be set up in Azure AD.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="api">API<a class="hash-link" href="#api" title="Direct link to heading">â€‹</a></h3><p>Head over to <a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps" target="_blank" rel="noopener noreferrer">Azure -&gt; Azure Active Directory -&gt; App registrations</a>
with your Intility Account, and create a new registration.</p><p><img alt="New Registration in Azure" src="/assets/images/azure-new-dotnet-ea0e24ada63afd57d0da294dd9a43caf.png" width="1023" height="631"><br>
<!-- -->Select a fitting name for your project, this name will be presented to the user during consent.</p><p>Under <code>Supported account types</code>, choose either <code>Intility AS only - Single tenant</code> or <code>Any Azure AD directory - Multitenant</code>.
This can be changed later, so if you&#x27;re unsure what to choose, select single tenant.</p><p>Leave the <code>Redirect URI</code> section blank.</p><p>Hit the register button, and you will be taken to an overview of your newly created registration.</p><p><img alt="Finding Client ID" src="/assets/images/azure-clientid-dotnet-a31cd0017a15663e6474390653500747.png" width="503" height="203"><br>
<!-- -->Copy the <code>Application (Client) ID</code> GUID, and paste it into the <code>AzureAd:ClientId</code> field in your <code>appsettings.json</code> file.</p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_BvAR">appsettings.json</div><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;AzureAd&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ClientId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;YOUR_CLIENT_ID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you chose Multitenant, set the <code>AzureAd:TenantId</code> field to <code>common</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="add-an-application-scope">Add an application scope<a class="hash-link" href="#add-an-application-scope" title="Direct link to heading">â€‹</a></h3><p>Go to Expose an API in your app registration, and add a scope.
You will be prompted to set an Application ID URI.
Use the suggested one, and hit Save and continue.</p><p><img alt="Add a scope" src="/assets/images/azure-add-scope-1b8457ba1e65c5e9f719f6ce5d8f2509.png" width="566" height="560"></p><p>Add a scope named <code>user_impersonation</code>, that can be consented by <code>Admins and users</code>.</p><p>You can use the following descriptions:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Access API as user</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Allows the app to access the API as the user.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Access API as you</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Allows the app to acces the API as you.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="swagger">Swagger<a class="hash-link" href="#swagger" title="Direct link to heading">â€‹</a></h2><p>In addition to creating an App Registration for the API itself, we need to make one for the Swagger client too.
Again head over to <a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps" target="_blank" rel="noopener noreferrer">Azure -&gt; Azure Active Directory -&gt; App registrations</a>.</p><p><img alt="New Registration in Azure" src="/assets/images/azure-new-swagger-f585ee6da48bc30d279999fb080ddcb3.png" width="832" height="505">  </p><p>Use the same name appended with <code>Swagger</code>.</p><p>Under <code>Redirect URI</code>, select <code>Single-page application (SPA)</code> and enter <code>http://localhost:5000/oauth2-redirect.html</code>.</p><p>Hit the register button, and you will be taken to an overview of your newly created registration.</p><p><img alt="Finding Client ID" src="/assets/images/azure-clientid-swagger-aeffd261b413bda085518af4de06fb52.png" width="500" height="197"><br>
<!-- -->Copy the <code>Application (Client) ID</code> GUID, and paste it into the <code>AzureAd:ClientId</code> field in your <code>appsettings.json</code> file.</p><div class="codeBlockContainer_I0IT language-jsx theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_BvAR">appsettings.json</div><div class="codeBlockContent_wNvx jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Swagger&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ClientId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;YOUR_SWAGGER_CLIENT_ID&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-reply-urls">Adding reply URLs<a class="hash-link" href="#adding-reply-urls" title="Direct link to heading">â€‹</a></h3><p>For each deployment of your app, you&#x27;ll need to register it. You can do that by going to the Authentication page.</p><p><img alt="Adding Reply URLs" src="/assets/images/azure-replyurls-swagger-a9471812a200512d52bd05df1f221d87.png" width="811" height="368"><br>
<!-- -->The first reply URLs we need to add are the localhost https URL, and the OpenShift deploy URL:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://localhost:5001/oauth2-redirect.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://{your-project-slug}-dev.apps.int.intility.no/oauth2-redirect.html</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can also add more later if you create more environments.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="access-api">Access API<a class="hash-link" href="#access-api" title="Direct link to heading">â€‹</a></h3><p>To allow Swagger to talk to the API, you need to add API permissions to the Swagger app registration.
Go to API permissions, and hit Add a permission.
Under My APIs, find your API, select the scope(s) and press Add permissions.</p><p><img alt="Add API permission" src="/assets/images/azure-api-permissions-3bfc9e8d1623d4e3030cdc7b31ee9872.png" width="832" height="542"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="guest-users">Guest users<a class="hash-link" href="#guest-users" title="Direct link to heading">â€‹</a></h2><p>The template comes with an authorization policy that denies guest users in Azure AD from accessing the API.
This policy is enabled when the application is not set up as multitenant.
If you want guest users to access your single tenant API, simply remove the lines applying the policy.</p><div class="codeBlockContainer_I0IT language-csharp theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_BvAR">Startup.cs</div><div class="codeBlockContent_wNvx csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">services.AddAuthorization(options =&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    var tenantId = Configuration[&quot;AzureAd:TenantId&quot;];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (tenantId != &quot;common&quot; &amp;&amp; tenantId != &quot;organizations&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        options.AddPolicy(&quot;NoGuests&quot;, policy =&gt; policy.RequireClaim(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ClaimConstants.TenantId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tenantId));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="user-assignment-in-enterprise-application">User Assignment in Enterprise Application<a class="hash-link" href="#user-assignment-in-enterprise-application" title="Direct link to heading">â€‹</a></h3><p>The policy successfully denies guest users access to the API.
However, it&#x27;s not very user friendly, since the user won&#x27;t know their denied until they call the API.
Using user assignment in Enterprise Applications, we can deny users during authentication.</p><p>Go to <a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/StartboardApplicationsMenuBlade/AllApps/menuId/" target="_blank" rel="noopener noreferrer">Azure AD -&gt; Enterprise Applications</a> and find your application (you can search by Client ID).<br>
<!-- -->Under Properties, enable <code>User assignment required?</code> and save.</p><p><img alt="Enable User assignment required" src="data:image/png;base64,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" width="412" height="39"></p><p>Then, go to Users and groups, and add user/group. Find users or a fitting group and assign it to the role Default Access.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Groups you select should have all users as direct members of the group. Nested groups does not work with Enterprise Applications.</p></div></div><p>This should be done for all app registrations (API, Swagger and frontend).</p><p>For more information, check out <a href="https://gitlab.intility.com/groups/documentation/-/wikis/Security/API-sikkerhet-med-Azure-AD" target="_blank" rel="noopener noreferrer">our internal docs.</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Intility/templates/tree/main/docusaurus/dotnet/setup/authorization.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dotnet/setup/gitlab"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GitLab Repository</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/dotnet/setup/gitlab-ci"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">.gitlab-ci.yml Overview</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li><li><a href="#add-an-application-scope" class="table-of-contents__link toc-highlight">Add an application scope</a></li><li><a href="#swagger" class="table-of-contents__link toc-highlight">Swagger</a><ul><li><a href="#adding-reply-urls" class="table-of-contents__link toc-highlight">Adding reply URLs</a></li><li><a href="#access-api" class="table-of-contents__link toc-highlight">Access API</a></li></ul></li><li><a href="#guest-users" class="table-of-contents__link toc-highlight">Guest users</a><ul><li><a href="#user-assignment-in-enterprise-application" class="table-of-contents__link toc-highlight">User Assignment in Enterprise Application</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a href="https://bifrost.intility.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Bifrost<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://create-react-app.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Create React App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Channels</div><ul class="footer__items"><li class="footer__item"><a href="https://intility.slack.com/archives/CRTT6METE" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>#programming<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://intility.slack.com/archives/CRVGGS6R1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>#frontend<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://developers.intility.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>developers.intility.no<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Intility Services</div><ul class="footer__items"><li class="footer__item"><a href="https://gitlab.intility.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://sonarqube.intility.no/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>SonarQube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://sentry.intility.no/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Sentry<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://console.apps.openshift.intility.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>OpenShift<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Azure Portal<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Intility AS. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.097a4fd9.js"></script>
<script src="/assets/js/main.b9715fda.js"></script>
</body>
</html>